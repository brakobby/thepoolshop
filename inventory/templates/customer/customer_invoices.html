{% load static %}
{% extends "base.html" %}
{% load static %}

{% block title %}Create Invoice{% endblock %}

{% block extra_css %}
  <style>
    :root{--bg:#f8faff;--panel:#ffffff;--muted:#64748b;--primary-600:#0d6efd;--primary-700:#0b5ed7;--accent:#3b82f6;--card-shadow:0 10px 30px rgba(13,110,253,.06);--glass:rgba(255,255,255,.85);--border:rgba(13,110,253,.08);--rounded:14px;--transition:all .22s cubic-bezier(.4,0,.2,1)}
    .dark-mode-enh{--bg:#0f172a;--panel:#1e293b;--muted:#94a3b8;--primary-600:#60a5fa;--primary-700:#3b82f6;--card-shadow:0 10px 30px rgba(0,0,0,.3);--glass:rgba(30,41,59,.9);--border:rgba(255,255,255,.08);color:#e2e8f0}
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Inter','Segoe UI',sans-serif}
    body{background:var(--bg);color:#1e293b;overflow:hidden;transition:var(--transition)}
    .topbar{height:70px;background:var(--glass);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);box-shadow:0 4px 20px rgba(0,0,0,.04);position:sticky;top:0;z-index:1030;transition:var(--transition)}
    .brand{display:flex;align-items:center;gap:.6rem;font-weight:700;color:var(--primary-700);text-decoration:none;font-size:1.15rem}
    .brand i{color:var(--primary-600);font-size:1.35rem}
    .layout{display:flex;height:calc(100vh - 70px);overflow:hidden}
    .sidebar{width:260px;min-width:260px;background:linear-gradient(180deg,#052a6b,#0b63d6);color:#fff;padding:1.5rem 1rem;display:flex;flex-direction:column;overflow:hidden;transition:width .3s ease;box-shadow:8px 0 30px rgba(5,42,107,.12)}
    .sidebar .nav-title{font-size:.72rem;color:rgba(255,255,255,.8);letter-spacing:.08em;margin:0 0 .8rem .8rem;font-weight:600}
    .sidebar .nav-link{color:rgba(255,255,255,.92);padding:.75rem .9rem;border-radius:10px;display:flex;align-items:center;gap:.8rem;font-weight:600;transition:var(--transition);margin:.2rem .5rem}
    .sidebar .nav-link:hover{background:rgba(255,255,255,.12);transform:translateX(6px);box-shadow:0 4px 12px rgba(0,0,0,.1)}
    .sidebar .nav-link.active{background:rgba(255,255,255,.18);box-shadow:inset 0 0 0 1px rgba(255,255,255,.1);font-weight:700}
    .sidebar-collapsed{width:72px!important;min-width:72px!important}
    .sidebar-collapsed .nav-title,.sidebar-collapsed .nav-link .label{display:none}
    .sidebar-collapsed .nav-link{justify-content:center;padding:.75rem}
    .main{flex:1;overflow-y:auto;overflow-x:hidden;padding:1.5rem;background:var(--bg);transition:var(--transition)}
    .page-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:.75rem;border-bottom:1px solid var(--border)}
    .page-title{font-size:1.4rem;font-weight:700;color:var(--primary-700);display:flex;align-items:center;gap:.5rem}
    .table-card{background:var(--panel);border-radius:var(--rounded);overflow:hidden;box-shadow:var(--card-shadow);border:1px solid var(--border)}
    .table thead th{background:transparent;border-bottom:1px solid var(--border);font-weight:700;color:#1e293b;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}
    .badge-status{font-size:.75rem;padding:.35em .65em;border-radius:50px;font-weight:600}
    .action-btn{padding:.35rem .55rem;font-size:.8rem;border-radius:8px}
    @media(max-width:992px){.layout{flex-direction:column}.sidebar{width:100%;height:auto;padding:1rem;box-shadow:none}}
  </style>
</head>
<body>

 


    <!-- Sidebar -->
    

    <!-- Main -->
    <main class="main">
      <section class="page-header">
        <div class="page-title"><i class="fas fa-receipt"></i> Invoices for {{ customer.name }}</div>
        <a href="{% url 'customer_list' %}" class="btn btn-outline-secondary btn-sm"><i class="fas fa-arrow-left"></i> Back</a>
      </section>

      <div class="table-card">
        <div class="table-responsive">
          <table class="table table-hover mb-0">
            <thead>
              <tr>
                <th>#</th><th>Date</th><th class="text-end">Total</th><th class="text-center">Status</th><th class="text-center">Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for inv in invoices %}
              <tr>
                <td><strong>#{{ inv.invoice_number }}</strong></td>
                <td>{{ inv.date_created|date:"d M Y" }}</td>
                <td class="text-end">GHâ‚µ{{ inv.total_amount|floatformat:2 }}</td>
                <td class="text-center">
                  {% if inv.is_paid %}
                    <span class="badge-status bg-success">Paid</span>
                  {% else %}
                    <span class="badge-status bg-warning text-dark">Unpaid</span>
                  {% endif %}
                </td>
                <td class="text-center">
                  <a href="{% url 'view_invoice' inv.id %}" class="btn btn-sm btn-outline-info action-btn" title="View"><i class="fas fa-eye"></i></a>
                  {% if inv.is_paid %}
                    <a href="{% url 'generate_receipt' inv.id %}" class="btn btn-sm btn-outline-success action-btn" title="Print"><i class="fas fa-print"></i></a>
                  {% endif %}
                </td>
              </tr>
              {% empty %}
              <tr><td colspan="5" class="text-center py-5"><i class="fas fa-inbox fa-3x text-muted mb-3"></i><h5>No invoices</h5></td></tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const sidebar=document.getElementById('sidebar'),toggleBtn=document.getElementById('sidebarToggle');
    toggleBtn&&toggleBtn.addEventListener('click',()=>{sidebar.classList.toggle('sidebar-collapsed')});
    const darkToggle=document.getElementById('darkModeToggle');
    darkToggle.addEventListener('click',()=>{document.body.classList.toggle('dark-mode-enh');const i=darkToggle.querySelector('i');i.classList.toggle('fa-moon');i.classList.toggle('fa-sun')});
  </script>
</body>
</html>